{"source":2,"revision":103,"description":null,"createdBy":{"displayName":"Frederick Pearson","url":"https://spsprodcca1.vssps.visualstudio.com/Ad3438f96-11fa-488c-b6b3-408621abce71/_apis/Identities/6801a3ec-5fd4-6616-8a81-3631f29016b3","_links":{"avatar":{"href":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"}},"id":"6801a3ec-5fd4-6616-8a81-3631f29016b3","uniqueName":"fpearson@cloudstrucc.com","imageUrl":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz","descriptor":"aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"},"createdOn":"2022-05-20T14:52:04.080Z","modifiedBy":{"displayName":"Frederick Pearson","url":"https://spsprodcca1.vssps.visualstudio.com/Ad3438f96-11fa-488c-b6b3-408621abce71/_apis/Identities/6801a3ec-5fd4-6616-8a81-3631f29016b3","_links":{"avatar":{"href":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"}},"id":"6801a3ec-5fd4-6616-8a81-3631f29016b3","uniqueName":"fpearson@cloudstrucc.com","imageUrl":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz","descriptor":"aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"},"modifiedOn":"2022-06-23T06:27:35.140Z","isDeleted":false,"lastRelease":{"id":62,"name":"Release-62","artifacts":[],"_links":{},"description":"","releaseDefinition":{"id":1,"projectReference":null,"_links":{}},"createdOn":"2022-06-22T16:09:55.510Z","createdBy":{"displayName":"Frederick Pearson","url":"https://spsprodcca1.vssps.visualstudio.com/Ad3438f96-11fa-488c-b6b3-408621abce71/_apis/Identities/6801a3ec-5fd4-6616-8a81-3631f29016b3","_links":{"avatar":{"href":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"}},"id":"6801a3ec-5fd4-6616-8a81-3631f29016b3","uniqueName":"fpearson@cloudstrucc.com","imageUrl":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz","descriptor":"aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"}},"variables":{},"variableGroups":[5],"environments":[{"id":1,"name":"UAT Deployment Stage","rank":1,"owner":{"displayName":"Frederick Pearson","url":"https://spsprodcca1.vssps.visualstudio.com/Ad3438f96-11fa-488c-b6b3-408621abce71/_apis/Identities/6801a3ec-5fd4-6616-8a81-3631f29016b3","_links":{"avatar":{"href":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"}},"id":"6801a3ec-5fd4-6616-8a81-3631f29016b3","uniqueName":"fpearson@cloudstrucc.com","imageUrl":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz","descriptor":"aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":1}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":2},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":3}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"windows-latest"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":72,"demands":[],"enableAccessToken":true,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"PowerShell Script","refName":"slnFiles","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Write your PowerShell commands here.\n# find the first .zip file in the artifact folder\n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln\\\") {\n$slnFile = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=slnFile]$slnFile\"\n}\n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln2\\\") {\n$slnFile2 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln2\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=slnFile2]$slnFile2\"\n}\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln3\\\") {\n$slnFile3 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln3\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=slnFile3]$slnFile3\"\n}          \n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln4\\\") {\n$slnFile4 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln4\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=slnFile4]$slnFile4\"\n}         \n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data\\\") {\n$dataFile = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=dataFile]$dataFile\"\n}          \nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data2\\\") {\n$dataFile2 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data2\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=dataFile2]$dataFile2\"\n}          \nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data3\\\") {\n$dataFile3 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data3\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=dataFile3]$dataFile3\"\n}          \nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data4\") {\n$dataFile4 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data4\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=dataFile4]$dataFile4\"\n}          \n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Portal\") {\n$portal = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Portal\" |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=portal]$portal\"\n}          \n\n\n\n\n\n","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"}},{"environment":{},"taskId":"8015465b-f367-4ec4-8215-8edf682574d3","version":"0.*","name":"Power Platform Tool Installer ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"DefaultVersion":"true","PowerAppsAdminVersion":"2.0.139","XrmToolingPackageDeploymentVersion":"3.3.0.928","MicrosoftPowerAppsCheckerVersion":"1.0.29","CrmSdkCoreToolsVersion":"9.1.0.92","XrmOnlineManagementApiVersion":"(obsolete)"}},{"environment":{},"taskId":"04ad1c72-5e49-4686-8a3a-dda6948b0fcd","version":"12.*","name":"Power DevOps Tool Installer","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"nugetFeed":"official","nugetSource":"https://api.nuget.org/v3/index.json","nugetUsername":"","nugetPassword":"","nugetUseProxy":"true","psFeed":"official","psSource":"https://www.powershellgallery.com/api/v2","psUsername":"","psPassword":"","psUseProxy":"true","coreToolsVersion":"","crmConnectorVersion":"","packageDeploymentVersion":"","onlineAPIVersion":"","checkerVersion":"","configMigrationVersion":"","powerAppsAdminVersion":"","powerAppsVersion":"","powerAppsCLIVersion":"","msalPSVersion":"","mgUsersVersion":"","mgGroupsVersion":""}},{"environment":{},"taskId":"81fa890c-2b95-4d6b-bc9e-58828d754d07","version":"12.*","name":"Import Configuration Migration Data","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['dataFile'], '')","inputs":{"crmConnectionString":"$(TargetConnection-UAT)","dataFile":"$(dataFile)","concurrentThreads":"0","userMapFile":"0","enabledBatchMode":"false","batchSize":"600","crmConnectionTimeout":"2","logsDirectory":""}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"0.*","name":"Power Platform Import Solution ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['slnFile2'], '')","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"bb358d68-e4e3-43e0-ab0b-594bf0dac25f","SolutionInputFile":"$(slnFile)","UseDeploymentSettingsFile":"false","DeploymentSettingsFile":"","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"false","OverwriteUnmanagedCustomizations":"false","PublishWorkflows":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true"}},{"environment":{},"taskId":"81fa890c-2b95-4d6b-bc9e-58828d754d07","version":"12.*","name":"Import Configuration Migration Data 2","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['dataFile2'], '')","inputs":{"crmConnectionString":"$(TargetConnection-UAT)","dataFile":"$(dataFile2)","concurrentThreads":"0","userMapFile":"0","enabledBatchMode":"false","batchSize":"600","crmConnectionTimeout":"2","logsDirectory":""}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"0.*","name":"Power Platform Import Solution 2","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['slnFile2'], '')","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"bb358d68-e4e3-43e0-ab0b-594bf0dac25f","SolutionInputFile":"$(slnFile2)","UseDeploymentSettingsFile":"false","DeploymentSettingsFile":"","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"false","OverwriteUnmanagedCustomizations":"false","PublishWorkflows":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true"}},{"environment":{},"taskId":"81fa890c-2b95-4d6b-bc9e-58828d754d07","version":"12.*","name":"Import Configuration Migration Data 3","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['dataFile3'], '')","inputs":{"crmConnectionString":"$(TargetConnection-UAT)","dataFile":"$(dataFile3)","concurrentThreads":"0","userMapFile":"0","enabledBatchMode":"false","batchSize":"600","crmConnectionTimeout":"2","logsDirectory":""}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"0.*","name":"Power Platform Import Solution 3","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['slnFile3'], '')","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"bb358d68-e4e3-43e0-ab0b-594bf0dac25f","SolutionInputFile":"$(slnFile3)","UseDeploymentSettingsFile":"false","DeploymentSettingsFile":"","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"false","OverwriteUnmanagedCustomizations":"false","PublishWorkflows":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true"}},{"environment":{},"taskId":"81fa890c-2b95-4d6b-bc9e-58828d754d07","version":"12.*","name":"Import Configuration Migration Data 4","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['dataFile4'], '')","inputs":{"crmConnectionString":"$(TargetConnection-UAT)","dataFile":"$(dataFile4)","concurrentThreads":"0","userMapFile":"0","enabledBatchMode":"false","batchSize":"600","crmConnectionTimeout":"2","logsDirectory":""}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"0.*","name":"Power Platform Import Solution 4","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['slnFile4'], '')","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"bb358d68-e4e3-43e0-ab0b-594bf0dac25f","SolutionInputFile":"$(slnFile3)","UseDeploymentSettingsFile":"false","DeploymentSettingsFile":"","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"false","OverwriteUnmanagedCustomizations":"false","PublishWorkflows":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true"}},{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"PowerShell Script","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['portal'], '')","inputs":{"targetType":"inline","filePath":"$(System.DefaultWorkingDirectory)/ARTEFACTS/Portal/customer-self-service","arguments":"","script":"$portalPath = '$(System.ArtifactsDirectory)\\ARTEFACTS\\Portals\\customer-self-service'\n\nSet-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass\n\nNew-ItemProperty -Path \"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\FileSystem\" `\n-Name \"LongPathsEnabled\" -Value 1 -PropertyType DWORD -Force\n\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n$sourceNugetExe = \"https://dist.nuget.org/win-x86-commandline/latest/nuget.exe\"\n$targetNugetExe = \".\\nuget.exe\"\nRemove-Item .\\CLI -Force -Recurse -ErrorAction Ignore\nInvoke-WebRequest $sourceNugetExe -OutFile $targetNugetExe\nSet-Alias nuget $targetNugetExe -Scope Global -Verbose\n\n./nuget install Microsoft.PowerApps.CLI -Version '1.12.2' -O .\ncd ./Microsoft.PowerApps.CLI.1.12.2\ncd tools\n\n.\\pac.exe auth create --url $TargetURL-UAT --applicationId $ClientID --tenant $TenantID --clientSecret $ClientSecret\n$portalQuery = .\\pac.exe paportal list\n$portal = $portalQuery[5].substring(12,36)\n.\\pac.exe paportal upload -p $portalPath --deploymentProfile release","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":62,"url":"https://vsrm.dev.azure.com/cloudstrucc/ff57a570-a481-4115-a670-47562ce16d36/_apis/Release/releases/62","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/cloudstrucc/_apis/public/Release/badge/ff57a570-a481-4115-a670-47562ce16d36/1/1"},{"id":6,"name":"PROD Deployment Stage","rank":2,"owner":{"displayName":"Frederick Pearson","url":"https://spsprodcca1.vssps.visualstudio.com/Ad3438f96-11fa-488c-b6b3-408621abce71/_apis/Identities/6801a3ec-5fd4-6616-8a81-3631f29016b3","_links":{"avatar":{"href":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"}},"id":"6801a3ec-5fd4-6616-8a81-3631f29016b3","uniqueName":"fpearson@cloudstrucc.com","imageUrl":"https://dev.azure.com/cloudstrucc/_apis/GraphProfile/MemberAvatars/aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz","descriptor":"aad.NjgwMWEzZWMtNWZkNC03NjE2LThhODEtMzYzMWYyOTAxNmIz"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":16}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":17},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":18}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"windows-latest"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":72,"demands":[],"enableAccessToken":true,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"PowerShell Script","refName":"slnFiles","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Write your PowerShell commands here.\n# find the first .zip file in the artifact folder\n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln\\\") {\n$slnFile = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=slnFile]$slnFile\"\n}\n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln2\\\") {\n$slnFile2 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln2\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=slnFile2]$slnFile2\"\n}\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln3\\\") {\n$slnFile3 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln3\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=slnFile3]$slnFile3\"\n}          \n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln4\\\") {\n$slnFile4 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Sln4\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=slnFile4]$slnFile4\"\n}         \n\nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data\\\") {\n$dataFile = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=dataFile]$dataFile\"\n}          \nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data2\\\") {\n$dataFile2 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data2\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=dataFile2]$dataFile2\"\n}          \nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data3\\\") {\n$dataFile3 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data3\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=dataFile3]$dataFile3\"\n}          \nif (Test-Path -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data4\") {\n$dataFile4 = Get-ChildItem  -Path \"$(System.ArtifactsDirectory)\\ARTEFACTS\\Data4\\\" -Filter *.zip |\n                    ForEach-Object { $_.fullname } |\n           Select-Object -First 1\nWrite-Host \"##vso[task.setvariable variable=dataFile4]$dataFile4\"\n}          \n\n\n\n\n","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"}},{"environment":{},"taskId":"8015465b-f367-4ec4-8215-8edf682574d3","version":"0.*","name":"Power Platform Tool Installer ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"DefaultVersion":"true","PowerAppsAdminVersion":"2.0.139","XrmToolingPackageDeploymentVersion":"3.3.0.928","MicrosoftPowerAppsCheckerVersion":"1.0.29","CrmSdkCoreToolsVersion":"9.1.0.92","XrmOnlineManagementApiVersion":"(obsolete)"}},{"environment":{},"taskId":"04ad1c72-5e49-4686-8a3a-dda6948b0fcd","version":"12.*","name":"Power DevOps Tool Installer","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"nugetFeed":"official","nugetSource":"https://api.nuget.org/v3/index.json","nugetUsername":"","nugetPassword":"","nugetUseProxy":"true","psFeed":"official","psSource":"https://www.powershellgallery.com/api/v2","psUsername":"","psPassword":"","psUseProxy":"true","coreToolsVersion":"","crmConnectorVersion":"","packageDeploymentVersion":"","onlineAPIVersion":"","checkerVersion":"","configMigrationVersion":"","powerAppsAdminVersion":"","powerAppsVersion":"","powerAppsCLIVersion":"","msalPSVersion":"","mgUsersVersion":"","mgGroupsVersion":""}},{"environment":{},"taskId":"81fa890c-2b95-4d6b-bc9e-58828d754d07","version":"12.*","name":"Import Configuration Migration Data","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['dataFile'], '')","inputs":{"crmConnectionString":"$(TargetConnection-PROD)","dataFile":"$(dataFile)","concurrentThreads":"0","userMapFile":"0","enabledBatchMode":"false","batchSize":"600","crmConnectionTimeout":"2","logsDirectory":""}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"0.*","name":"Power Platform Import Solution ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['slnFile2'], '')","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"bb358d68-e4e3-43e0-ab0b-594bf0dac25f","SolutionInputFile":"$(slnFile)","UseDeploymentSettingsFile":"false","DeploymentSettingsFile":"","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"false","OverwriteUnmanagedCustomizations":"false","PublishWorkflows":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true"}},{"environment":{},"taskId":"81fa890c-2b95-4d6b-bc9e-58828d754d07","version":"12.*","name":"Import Configuration Migration Data 2","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['dataFile2'], '')","inputs":{"crmConnectionString":"$(TargetConnection-PROD)","dataFile":"$(dataFile2)","concurrentThreads":"0","userMapFile":"0","enabledBatchMode":"false","batchSize":"600","crmConnectionTimeout":"2","logsDirectory":""}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"0.*","name":"Power Platform Import Solution 2","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['slnFile2'], '')","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"bb358d68-e4e3-43e0-ab0b-594bf0dac25f","SolutionInputFile":"$(slnFile2)","UseDeploymentSettingsFile":"false","DeploymentSettingsFile":"","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"false","OverwriteUnmanagedCustomizations":"false","PublishWorkflows":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true"}},{"environment":{},"taskId":"81fa890c-2b95-4d6b-bc9e-58828d754d07","version":"12.*","name":"Import Configuration Migration Data 3","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['dataFile3'], '')","inputs":{"crmConnectionString":"$(TargetConnection-PROD)","dataFile":"$(dataFile3)","concurrentThreads":"0","userMapFile":"0","enabledBatchMode":"false","batchSize":"600","crmConnectionTimeout":"2","logsDirectory":""}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"0.*","name":"Power Platform Import Solution 3","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['slnFile3'], '')","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"bb358d68-e4e3-43e0-ab0b-594bf0dac25f","SolutionInputFile":"$(slnFile3)","UseDeploymentSettingsFile":"false","DeploymentSettingsFile":"","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"false","OverwriteUnmanagedCustomizations":"false","PublishWorkflows":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true"}},{"environment":{},"taskId":"81fa890c-2b95-4d6b-bc9e-58828d754d07","version":"12.*","name":"Import Configuration Migration Data 4","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['dataFile4'], '')","inputs":{"crmConnectionString":"$(TargetConnection-PROD)","dataFile":"$(dataFile4)","concurrentThreads":"0","userMapFile":"0","enabledBatchMode":"false","batchSize":"600","crmConnectionTimeout":"2","logsDirectory":""}},{"environment":{},"taskId":"fb4a48f1-0eeb-4909-9e47-9bc290e1cb89","version":"0.*","name":"Power Platform Import Solution 4","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"ne(variables['slnFile4'], '')","inputs":{"authenticationType":"PowerPlatformSPN","PowerPlatformEnvironment":"","PowerPlatformSPN":"bb358d68-e4e3-43e0-ab0b-594bf0dac25f","SolutionInputFile":"$(slnFile3)","UseDeploymentSettingsFile":"false","DeploymentSettingsFile":"","AsyncOperation":"true","MaxAsyncWaitTime":"60","HoldingSolution":"false","OverwriteUnmanagedCustomizations":"false","PublishWorkflows":"true","SkipProductUpdateDependencies":"false","ConvertToManaged":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":58,"url":"https://vsrm.dev.azure.com/cloudstrucc/ff57a570-a481-4115-a670-47562ce16d36/_apis/Release/releases/58","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/cloudstrucc/_apis/public/Release/badge/ff57a570-a481-4115-a670-47562ce16d36/1/6"}],"artifacts":[{"sourceId":"ff57a570-a481-4115-a670-47562ce16d36:5","type":"Build","alias":"ARTEFACTS","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://dev.azure.com/cloudstrucc/_permalink/_build/index?collectionId=3721e20d-9b74-41c6-abf6-35159fb365ef&projectId=ff57a570-a481-4115-a670-47562ce16d36&definitionId=5","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"5","name":"PowerPlatform Deployment - Development & Test"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"ff57a570-a481-4115-a670-47562ce16d36","name":"PowerPlatform-CIDC"},"repository":{"id":"","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[{"artifactAlias":"ARTEFACTS","triggerConditions":[{"targetBranch":"uat","tags":[]}],"pullRequestConfiguration":{"useArtifactReference":false,"codeRepositoryReference":{"systemType":1,"repositoryReference":{"pullRequestRepositoryId":{"value":"dabcfebf-5193-4536-955a-c074123996f5","displayValue":"PowerPlatform-CIDC"},"pullRequestProjectId":{"value":"ff57a570-a481-4115-a670-47562ce16d36","displayValue":"PowerPlatform-CIDC"}}}},"statusPolicyName":"","triggerType":6}],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseNew"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":1,"name":"PowerPlatfrom-Release","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/cloudstrucc/ff57a570-a481-4115-a670-47562ce16d36/_apis/Release/definitions/1","_links":{"self":{"href":"https://vsrm.dev.azure.com/cloudstrucc/ff57a570-a481-4115-a670-47562ce16d36/_apis/Release/definitions/1"},"web":{"href":"https://dev.azure.com/cloudstrucc/ff57a570-a481-4115-a670-47562ce16d36/_release?definitionId=1"}}}